<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ƒé¡†ç¥ç§˜å¯¶çŸ³ | The Seven Mystic Stones</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            line-height: 1.6;
            color: #2c1810;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 206, 84, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(72, 187, 120, 0.3) 0%, transparent 50%),
                linear-gradient(135deg, #74b9ff 0%, #0984e3 30%, #00b894 70%, #00cec9 100%);
            min-height: 100vh;
            background-attachment: fixed;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="40" r="1" fill="rgba(255,255,255,0.15)"/><circle cx="40" cy="80" r="1.5" fill="rgba(255,255,255,0.1)"/></svg>') repeat,
                radial-gradient(circle at 30% 60%, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 200px 200px, 50px 50px;
            opacity: 0.6;
            pointer-events: none;
            z-index: -1;
        }

        .main-container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            position: fixed;
            top: 120px;
            left: -380px;
            width: 380px;
            height: calc(100vh - 120px);
            background: 
                linear-gradient(135deg, rgba(101, 67, 33, 0.95) 0%, rgba(139, 69, 19, 0.95) 100%);
            border-radius: 0 20px 20px 0;
            z-index: 1000;
            transition: left 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow: visible;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(210, 180, 140, 0.3);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .sidebar.expanded {
            left: 0px;
        }

        .sidebar-content {
            padding: 25px;
            color: #f4f1de;
            width: 100%;
            height: 100%;
            overflow-y: auto;
        }

        .sidebar-content::-webkit-scrollbar {
            width: 12px;
        }

        .sidebar-content::-webkit-scrollbar-track {
            background: rgba(101, 67, 33, 0.3);
            border-radius: 10px;
        }

        .sidebar-content::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #cd853f 0%, #daa520 100%);
            border-radius: 10px;
            border: 2px solid rgba(101, 67, 33, 0.3);
        }

        .sidebar-content::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #daa520 0%, #ffd700 100%);
        }

        /* Firefox scrollbar styling */
        .sidebar-content {
            scrollbar-width: thin;
            scrollbar-color: #cd853f rgba(101, 67, 33, 0.3);
        }

        .bookmark-tabs {
            position: absolute;
            right: -60px;
            top: 0;
            width: 70px;
            height: 100%;
        }

        .tab-trigger {
            position: absolute;
            right: 0;
            background: linear-gradient(135deg, #8b4513 0%, #654321 100%);
            border: none;
            color: #f4f1de;
            padding: 25px 10px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            white-space: nowrap;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            border-radius: 0 15px 15px 0;
            min-height: 120px;
            width: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            box-shadow: 
                3px 3px 6px rgba(0, 0, 0, 0.3),
                2px 2px 4px rgba(0, 0, 0, 0.2);
            border: 2px solid rgba(210, 180, 140, 0.4);
        }

        .tab-trigger:hover {
            background: linear-gradient(135deg, #a0522d 0%, #8b4513 100%);
            box-shadow: 
                4px 4px 12px rgba(0, 0, 0, 0.4),
                3px 3px 8px rgba(0, 0, 0, 0.3);
            transform: scale(1.05);
        }

        .tab-trigger.active {
            background: linear-gradient(135deg, #cd853f 0%, #daa520 100%);
            z-index: 1002;
            box-shadow: 
                8px 8px 25px rgba(0, 0, 0, 0.5),
                6px 6px 15px rgba(0, 0, 0, 0.4),
                4px 4px 10px rgba(0, 0, 0, 0.3);
            transform: translateX(-5px) scale(1.1);
            border: 2px solid #ffd700;
        }

        .tab-trigger:nth-child(1) { top: 100px; }
        .tab-trigger:nth-child(2) { 
            top: 240px; 
            z-index: 1000;
        }

        .tab-trigger:nth-child(2).active {
            z-index: 1002;
        }

        .tab-icon {
            display: block;
            font-size: 1.6em;
            margin-bottom: 10px;
            transform: rotate(90deg);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .tab-text {
            font-size: 0.9em;
            font-weight: bold;
            letter-spacing: 2px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .tab-content {
            display: none;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid rgba(244, 241, 222, 0.3);
        }

        .tab-content.active {
            display: block;
        }

        .close-sidebar {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(139, 69, 19, 0.8);
            border: 2px solid #daa520;
            color: #f4f1de;
            font-size: 1.8em;
            cursor: pointer;
            z-index: 1002;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .close-sidebar:hover {
            background: rgba(205, 133, 63, 0.9);
            transform: rotate(90deg) scale(1.1);
        }

        .content-area {
            flex: 1;
            margin-left: 0px;
            padding: 20px;
            max-width: 100vw;
            transition: margin-left 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .content-area.sidebar-open {
            margin-left: 380px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 50px 30px;
            background: 
                linear-gradient(135deg, rgba(244, 241, 222, 0.95) 0%, rgba(255, 248, 220, 0.95) 100%);
            border-radius: 20px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(15px);
            border: 3px solid rgba(210, 180, 140, 0.5);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
            animation: shimmer 4s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }

        h1 {
            font-size: 3.5em;
            background: linear-gradient(135deg, #8b4513 0%, #cd853f 50%, #daa520 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 1;
        }

        .subtitle {
            font-size: 1.4em;
            color: #8b4513;
            font-style: italic;
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
        }

        .language-controls {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 25px 0;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }

        .language-switch {
            display: flex;
            align-items: center;
            gap: 15px;
            background: 
                linear-gradient(135deg, rgba(139, 69, 19, 0.9) 0%, rgba(101, 67, 33, 0.9) 100%);
            padding: 15px 25px;
            border-radius: 30px;
            box-shadow: 
                0 8px 16px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(210, 180, 140, 0.4);
        }

        .language-switch label {
            font-weight: bold;
            color: #f4f1de;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 70px;
            height: 38px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #8b4513 0%, #654321 100%);
            transition: .4s;
            border-radius: 38px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 30px;
            width: 30px;
            left: 4px;
            bottom: 4px;
            background: linear-gradient(135deg, #f4f1de 0%, #daa520 100%);
            transition: .4s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        input:checked + .slider {
            background: linear-gradient(135deg, #cd853f 0%, #daa520 100%);
        }

        input:focus + .slider {
            box-shadow: 0 0 8px rgba(218, 165, 32, 0.6);
        }

        input:checked + .slider:before {
            transform: translateX(32px);
            background: linear-gradient(135deg, #ffd700 0%, #f4f1de 100%);
        }

        .language-labels {
            display: flex;
            justify-content: space-between;
            width: 70px;
            font-size: 0.9em;
            margin-top: 8px;
            transition: all 0.3s ease;
        }

        .language-labels span {
            transition: all 0.3s ease;
            color: #f4f1de;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .story-content {
            background: 
                linear-gradient(135deg, rgba(244, 241, 222, 0.95) 0%, rgba(255, 248, 220, 0.95) 100%);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            margin: 30px 0;
            backdrop-filter: blur(15px);
            border: 3px solid rgba(210, 180, 140, 0.5);
            position: relative;
        }

        .story-element {
            margin: 40px 0;
        }

        .narration {
            background: 
                linear-gradient(135deg, rgba(139, 69, 19, 0.1) 0%, rgba(210, 180, 140, 0.1) 100%);
            border-left: 6px solid #cd853f;
            padding: 30px;
            border-radius: 0 15px 15px 0;
            font-style: italic;
            box-shadow: 
                0 8px 16px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            position: relative;
            border: 2px solid rgba(205, 133, 63, 0.2);
        }

        .narration::before {
            content: "ğŸ“œ";
            position: absolute;
            top: -12px;
            left: 25px;
            background: linear-gradient(135deg, #cd853f 0%, #daa520 100%);
            color: white;
            padding: 8px 15px;
            border-radius: 25px;
            font-size: 0.9em;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .comic-panel {
            background: 
                linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border: 4px solid #8b4513;
            border-radius: 15px;
            padding: 40px;
            margin: 25px 0;
            text-align: center;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                0 15px 30px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            position: relative;
            border-image: linear-gradient(45deg, #8b4513, #cd853f, #daa520, #8b4513) 4;
        }

        .comic-panel::before {
            content: "ğŸ­ Comic Panel";
            position: absolute;
            top: -18px;
            left: 30px;
            background: linear-gradient(135deg, #8b4513 0%, #cd853f 100%);
            color: #f4f1de;
            padding: 10px 25px;
            border-radius: 30px;
            font-size: 1em;
            font-weight: bold;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .challenge-box {
            background: 
                linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            border: 4px solid #8b0000;
            border-radius: 20px;
            padding: 35px;
            margin: 35px 0;
            box-shadow: 
                0 15px 30px rgba(231, 76, 60, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            color: white;
            position: relative;
        }

        .challenge-box::before {
            content: "âš¡ LINGUISTIC CHALLENGE";
            position: absolute;
            top: -18px;
            left: 30px;
            background: linear-gradient(135deg, #8b0000 0%, #dc143c 100%);
            color: white;
            padding: 10px 25px;
            border-radius: 30px;
            font-size: 1em;
            font-weight: bold;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }

        .challenge-box h3 {
            color: white;
            margin-bottom: 25px;
            font-size: 1.8em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .placeholder {
            color: #8b4513;
            font-style: italic;
            text-align: center;
            padding: 25px;
            border: 3px dashed #cd853f;
            border-radius: 12px;
            background: rgba(244, 241, 222, 0.5);
        }

        .map-container {
            background: 
                linear-gradient(135deg, rgba(244, 241, 222, 0.9) 0%, rgba(210, 180, 140, 0.9) 100%);
            border: 4px solid #8b4513;
            border-radius: 15px;
            padding: 35px;
            margin: 25px 0;
            text-align: center;
            min-height: 350px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(139, 69, 19, 0.1) 2px, transparent 2px),
                radial-gradient(circle at 75% 75%, rgba(205, 133, 63, 0.1) 1px, transparent 1px);
            background-size: 30px 30px, 15px 15px;
            box-shadow: 
                inset 0 4px 8px rgba(0, 0, 0, 0.1),
                0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .treasure-hunt-content {
            background: 
                linear-gradient(135deg, rgba(255, 215, 0, 0.2) 0%, rgba(255, 165, 0, 0.2) 100%);
            border: 4px solid #daa520;
            padding: 30px;
            border-radius: 15px;
            text-align: left;
            box-shadow: 
                inset 0 4px 8px rgba(218, 165, 32, 0.2),
                0 8px 16px rgba(0, 0, 0, 0.1);
            position: relative;
            color: #2c1810;
        }

        .treasure-hunt-content::before {
            content: "ğŸ—ï¸ THE MYSTERIOUS LETTER";
            position: absolute;
            top: -15px;
            left: 25px;
            background: linear-gradient(135deg, #daa520 0%, #ffd700 100%);
            color: #2c1810;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 0.9em;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .treasure-hunt-content h3 {
            color: #8b4513;
            margin-bottom: 20px;
            font-size: 1.6em;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .mwotlap-text {
            background: rgba(72, 187, 120, 0.1);
            border-left: 5px solid #00b894;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 12px 12px 0;
            font-family: 'Courier New', monospace;
            font-style: normal;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .chinese-text {
            font-family: 'Microsoft JhengHei', 'Noto Sans CJK TC', sans-serif;
            line-height: 1.8;
        }

        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }
            
            .sidebar {
                position: relative;
                width: 100%;
                height: auto;
                left: 0;
                top: 0;
                border-radius: 0;
            }
            
            .content-area {
                margin-left: 0;
                max-width: 100vw;
            }
            
            h1 {
                font-size: 2.5em;
            }
            
            .language-controls {
                flex-direction: column;
                align-items: center;
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="sidebar" id="sidebar">
            <div class="bookmark-tabs">
                <button class="tab-trigger active" onclick="showTab('letter')" data-tab="letter">
                    <span class="tab-icon">ğŸ—ï¸</span>
                    <span class="tab-text">LETTER</span>
                </button>
                <button class="tab-trigger" onclick="showTab('maps')" data-tab="maps">
                    <span class="tab-icon">ğŸ—ºï¸</span>
                    <span class="tab-text">MAPS</span>
                </button>
            </div>
            
            <button class="close-sidebar" onclick="closeSidebar()">&times;</button>
            <div class="sidebar-content">
                <div class="tab-content active" id="letter-content">
                    <div class="treasure-hunt-content">
                        <h3>ğŸŒŠ Na-lÄ“t ni-big</h3>
                        <div class="mwotlap-text" data-puzzle-lang="mwt">
                            <p><strong>Na-lÄ“t Mwotlap:</strong></p>
                            <p>
                                Qele ave nÄ“k so sok ne-vet yonÌ„ liviyÃ´?<br>
                                Van le-pnÅ MÌ„otlap. Sok mahÄ“ alge be-et.<br>
                                At yow, nÄ“k so et na-pnÅ susu. Ne-vet A aÄ“.<br>
                                At hÅw, nÄ“k so et na-hÅm ni-myen. Ne-vet B aÄ“.<br>
                                At hay, nÄ“k so et na-hanÌ„ wa ne-vet liwo. Ne-vet C aÄ“.<br>
                                Ä’gÄ“n, nÄ“k van le-sle Lahlap. TÅ hÅ van le-sle na-wha a na-pnÅ men.<br>
                                Van hÅw hiy na-hanÌ„. TÅ van hay, nÄ“k so et nÄ“-lÄ“.<br>
                                Van hay a le-lo lÄ“. TÅ van hag, van yow, van hag, van hay, van hay, van hay. Ne-vet D aÄ“.<br>
                                Van mÌ„Ål. TÅ van hay, van hag, van yow, van hay, tÅ van yow le-lo lÄ“.<br>
                                Van hag wa van yow, nÄ“k so et na-sle qet.<br>
                                HÅ hag hiy na-pnÅ itÃ´k.<br><br>
                                Sok n-Ä“mÌ„ yonÌ„! N-Ä“mÌ„ su vÄ“tÄ“l aÄ“ walÄ“g l-Ä“mÌ„ yonÌ„.<br>
                                N-Ä“mÌ„ su A tog tÃ´ lok hag l-Ä“mÌ„ yonÌ„. N-Ä“mÌ„ yon tog tÃ´ lok hÅw l-Ä“mÌ„ su A.<br>
                                N-Ä“mÌ„ su B tog tÃ´ lok yow l-Ä“mÌ„ yonÌ„. N-Ä“mÌ„ yon tog tÃ´ lok hay l-Ä“mÌ„ su B.<br>
                                N-Ä“mÌ„ su C tog tÃ´ lok hÅw l-Ä“mÌ„ su B. N-Ä“mÌ„ su B tog tÃ´ lok hag l-Ä“mÌ„ su C.<br><br>
                                Na-han Ä“mÌ„ ne-vet aÄ“ yow l-Ä“mÌ„ Åk?<br>
                                Ne-vet E tÅ a lalnÌ„e ne-vet liwo gÄ“n.
                            </p>
                        </div>
                        
                        <div class="mwotlap-text" data-puzzle-lang="adv" style="display: none;">
                            <p><strong>Advanced Linguistic Protocol:</strong></p>
                            <p>
                                Directional-discovery.sequence = [MÌ„otlap.watchtower â†’ yow:island.A, hÅw:lighthouse.B, hay:totem+rock.C]<br>
                                Navigation.chain = [Lahlap.port â†’ Men.island â†’ directional.maze â†’ ItÃ´k.island]<br>
                                Spatial.constraints = {<br>
                                &nbsp;&nbsp;chapel.reference â†’ hut.constellation.mapping<br>
                                &nbsp;&nbsp;mediate.lok + directional.system<br>
                                &nbsp;&nbsp;reciprocal.positioning.verification<br>
                                }<br>
                                Puzzle.condition = existential(stone.E) âˆ© location(yow.side) âˆ© reference(hut.unknown)<br>
                                Query.formulation = interrogative.mey + spatial.construction + verification.protocol
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="maps-content">
                    <h4 style="color: #f4f1de; text-align: center; margin-bottom: 20px;" data-puzzle-lang="mwt">Na-hap yonÌ„ vÄ“tÄ“l</h4>
                    <h4 style="color: #f4f1de; text-align: center; margin-bottom: 20px; display: none;" data-puzzle-lang="adv">Cartographic.References</h4>
                    
                    <div class="map-container">
                        <div class="placeholder" data-puzzle-lang="mwt">
                            [Hap A: Na-pnÅ MÌ„otlap - mahÄ“ alge, ne-vet A B C, na-tÄ“y Kaikoa]
                        </div>
                        <div class="placeholder" data-puzzle-lang="adv" style="display: none;">
                            [Map.1: MÌ„otlap.topography - watchtower.coordinates + stone.triangle.ABC + Kaikoa.route.trace]
                        </div>
                    </div>
                    
                    <div class="map-container">
                        <div class="placeholder" data-puzzle-lang="mwt">
                            [Hap B: Na-pnÅ Men - nÄ“-lÄ“ bah na-tÄ“y le-lo maze]
                        </div>
                        <div class="placeholder" data-puzzle-lang="adv" style="display: none;">
                            [Map.2: Men.island.structure - cave.system + maze.navigation.D + exit.protocol]
                        </div>
                    </div>
                    
                    <div class="map-container">
                        <div class="placeholder" data-puzzle-lang="mwt">
                            [Hap C: Na-pnÅ ItÃ´k - n-Ä“mÌ„ yonÌ„, n-Ä“mÌ„ su A B C, na-hanÌ„ yow]
                        </div>
                        <div class="placeholder" data-puzzle-lang="adv" style="display: none;">
                            [Map.3: ItÃ´k.settlement.grid - chapel.central + hut.constellation.ABC + totem.positioning.matrix]
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="content-area">
            <header>
                <h1>ä¸ƒé¡†ç¥ç§˜å¯¶çŸ³</h1>
                <h1 style="font-size: 2em; margin-top: -10px;">The Seven Mystic Stones</h1>
                <p class="subtitle">A Mwotlap Linguistic Treasure Hunt</p>
                
                <div class="language-controls">
                    <div class="language-switch">
                        <label>Story Language:</label>
                        <div class="switch" onclick="toggleStoryLanguage()">
                            <input type="checkbox" id="storyLang">
                            <span class="slider"></span>
                        </div>
                        <div class="language-labels">
                            <span id="storyLang1">EN</span>
                            <span id="storyLang2">ä¸­æ–‡</span>
                        </div>
                    </div>
                    
                    <div class="language-switch">
                        <label>Puzzle Language:</label>
                        <div class="switch" onclick="togglePuzzleLanguage()">
                            <input type="checkbox" id="puzzleLang">
                            <span class="slider"></span>
                        </div>
                        <div class="language-labels">
                            <span id="puzzleLang1">MWT</span>
                            <span id="puzzleLang2">ADV</span>
                        </div>
                    </div>
                </div>
            </header>

            <div class="story-content">
                <div class="story-element">
                    <div class="narration" data-story-lang="en">
                        <p>It all began with a bottle washed ashore. David, a travel blogger drawn to the unexpected, found it half-buried in the sand on a remote Taiwanese beach months ago. Inside was a letterâ€”weathered, sun-bleached, and written in a language he couldn't recognize.</p>
                        <p>He turned to Reddit for help. Weeks passed. Then months. Just when he was ready to give up, a message finally arrived from Vetea, a young man from Vanuatu who spoke Mwotlapâ€”a language spoken by only around 2,000 people on the island of Motalava.</p>
                    </div>
                    <div class="narration chinese-text" data-story-lang="zh" style="display: none;">
                        <p>é€™ä¸€åˆ‡éƒ½å§‹æ–¼ä¸€å€‹è¢«æ²–ä¸Šå²¸çš„ç“¶å­ã€‚å¤§è¡›æ˜¯ä¸€åè¢«æ„å¤–æ‰€å¸å¼•çš„æ—…è¡Œéƒ¨è½å®¢ï¼Œå¹¾å€‹æœˆå‰åœ¨å°ç£ä¸€å€‹åé æµ·ç˜ä¸Šç™¼ç¾äº†é€™å€‹åŠåŸ‹åœ¨æ²™ä¸­çš„ç“¶å­ã€‚è£¡é¢æœ‰ä¸€å°ä¿¡â€”â€”ç¶“å—é¢¨é›¨ä¾µè•ã€è¢«é™½å…‰æ¼‚ç™½ï¼Œç”¨ä»–ç„¡æ³•è¾¨èªçš„èªè¨€å¯«æˆã€‚</p>
                        <p>ä»–å‘Redditæ±‚åŠ©ã€‚å¹¾é€±éå»äº†ï¼Œç„¶å¾Œæ˜¯å¹¾å€‹æœˆã€‚å°±åœ¨ä»–æº–å‚™æ”¾æ£„çš„æ™‚å€™ï¼Œçµ‚æ–¼æ”¶åˆ°äº†ä¸€æ¢è¨Šæ¯ï¼Œä¾†è‡ªç“¦åŠªé˜¿åœ–çš„å¹´è¼•äººç¶­æäºï¼Œä»–æœƒèªªè«ç‰¹æ‹‰æ™®èªâ€”â€”ä¸€ç¨®åªæœ‰ç´„2000äººåœ¨è«å¡”æ‹‰ç“¦å³¶ä¸Šä½¿ç”¨çš„èªè¨€ã€‚</p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="comic-panel">
                        <div class="placeholder">
                            [Comic Panel 1: David finding the mysterious bottle on a Taiwanese beach - replace with your actual comic panel]
                        </div>
                    </div>
                </div>

                <div class="story-element">
                    <div class="narration" data-story-lang="en">
                        <p>Vetea had read the letter. It described seven mystic stones hidden across the islands of Vanuatu, along with cryptic directions to find them. Three matched the description of stones once discovered by his grandfather Kaikoaâ€”mysterious, glimmering relics etched with unexplainable patterns.</p>
                        <p>According to the letter, the authorâ€”a Mwotlap travelerâ€”had scattered the stones across Vanuatu, turning their hiding places into a game, and leaving clues behind for those curious enough to follow.</p>
                    </div>
                    <div class="narration chinese-text" data-story-lang="zh" style="display: none;">
                        <p>ç¶­æäºè®€äº†é€™å°ä¿¡ã€‚ä¿¡ä¸­æè¿°äº†éš±è—åœ¨ç“¦åŠªé˜¿åœ–å„å³¶å¶¼ä¸Šçš„ä¸ƒé¡†ç¥ç§˜å¯¶çŸ³ï¼Œä»¥åŠå°‹æ‰¾å®ƒå€‘çš„ç¥ç§˜æŒ‡ç¤ºã€‚å…¶ä¸­ä¸‰é¡†ç¬¦åˆä»–ç¥–çˆ¶å¡ä¼Šç§‘é˜¿æ›¾ç¶“ç™¼ç¾çš„çŸ³é ­æè¿°â€”â€”ç¥ç§˜çš„ã€é–ƒé–ƒç™¼å…‰çš„éºç‰©ï¼Œåˆ»è‘—ç„¡æ³•è§£é‡‹çš„åœ–æ¡ˆã€‚</p>
                        <p>æ ¹æ“šä¿¡ä¸­æ‰€è¿°ï¼Œä½œè€…â€”â€”ä¸€ä½è«ç‰¹æ‹‰æ™®èªçš„æ—…è¡Œè€…â€”â€”å°‡é€™äº›çŸ³é ­æ•£å¸ƒåœ¨ç“¦åŠªé˜¿åœ–å„åœ°ï¼Œå°‡å®ƒå€‘çš„è—èº«ä¹‹è™•è®Šæˆäº†ä¸€å€‹éŠæˆ²ï¼Œç‚ºé‚£äº›è¶³å¤ å¥½å¥‡çš„äººç•™ä¸‹äº†ç·šç´¢ã€‚</p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="comic-panel">
                        <div class="placeholder">
                            [Comic Panel 2: Kaikoa showing them the watchtower - "GÄ“n van hag!" - replace with your actual comic panel]
                        </div>
                    </div>
                </div>

                <div class="story-element">
                    <div class="narration" data-story-lang="en">
                        <p>Now, with mystery calling and clues in hand, David joined Vetea on a journey into the heart of the Pacificâ€”chasing legends, decoding directions, and hunting for the lost Seven Mystic Stones. The incredible journey started with Kaikoa showing them around from his watchtower, pointing out landmarks and the locations where he had discovered the first three stones.</p>
                        <p>But fate had other plans...</p>
                    </div>
                    <div class="narration chinese-text" data-story-lang="zh" style="display: none;">
                        <p>ç¾åœ¨ï¼Œå¸¶è‘—ç¥ç§˜çš„å¬å–šå’Œæ‰‹ä¸­çš„ç·šç´¢ï¼Œå¤§è¡›èˆ‡ç¶­æäºä¸€èµ·è¸ä¸Šäº†æ·±å…¥å¤ªå¹³æ´‹å¿ƒè‡Ÿåœ°å¸¶çš„æ—…ç¨‹â€”â€”è¿½å°‹å‚³èªªã€è§£ç¢¼æ–¹å‘ã€å°‹æ‰¾å¤±è½çš„ä¸ƒé¡†ç¥ç§˜å¯¶çŸ³ã€‚é€™æ®µä¸å¯æ€è­°çš„æ—…ç¨‹å§‹æ–¼å¡ä¼Šç§‘é˜¿å¾ä»–çš„ç­æœ›å¡”å¸¶é ˜ä»–å€‘åƒè§€ï¼ŒæŒ‡å‡ºåœ°æ¨™å’Œä»–ç™¼ç¾å‰ä¸‰é¡†çŸ³é ­çš„ä½ç½®ã€‚</p>
                        <p>ä½†å‘½é‹å¦æœ‰å®‰æ’...</p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="comic-panel">
                        <div class="placeholder">
                            [Comic Panel 3: The tragic accident - Vetea shouting "That's not what yow means here!" as he throws himself toward the bomb - replace with your actual comic panel]
                        </div>
                    </div>
                </div>

                <div class="story-element">
                    <div class="narration" data-story-lang="en">
                        <p>During their search on Happy Island, David mistakenly dug under the wrong rock, triggering an explosive device. Vetea immediately recognized the countdown beeps and realized it was planted by the puzzle creator to eliminate wrong choices. In panic, he yelled "That's not what yow means here!" and threw himself at David to push him away, landing on the bomb himself.</p>
                        <p>The explosion sent Vetea into a coma. Now David faces the remaining challenges alone, with only his fragmentary knowledge of Mwotlap directional systems to guide him.</p>
                    </div>
                    <div class="narration chinese-text" data-story-lang="zh" style="display: none;">
                        <p>åœ¨å¿«æ¨‚å³¶çš„æœå°‹éç¨‹ä¸­ï¼Œå¤§è¡›éŒ¯èª¤åœ°åœ¨éŒ¯èª¤çš„çŸ³é ­ä¸‹æŒ–æ˜ï¼Œè§¸ç™¼äº†ä¸€å€‹çˆ†ç‚¸è£ç½®ã€‚ç¶­æäºç«‹å³è­˜åˆ¥å‡ºå€’æ•¸è¨ˆæ™‚çš„å—¶å—¶è²ï¼Œæ„è­˜åˆ°é€™æ˜¯è¬é¡Œå‰µä½œè€…è¨­ç½®çš„ï¼Œç”¨ä¾†æ·˜æ±°éŒ¯èª¤é¸æ“‡çš„äººã€‚åœ¨ææ…Œä¸­ï¼Œä»–å¤§å–Šã€Œyowåœ¨é€™è£¡ä¸æ˜¯é‚£å€‹æ„æ€ï¼ã€ä¸¦æ’²å‘å¤§è¡›æƒ³è¦æ¨é–‹ä»–ï¼Œçµæœè‡ªå·±è½åœ¨äº†ç‚¸å½ˆä¸Šã€‚</p>
                        <p>çˆ†ç‚¸ä½¿ç¶­æäºé™·å…¥æ˜è¿·ã€‚ç¾åœ¨å¤§è¡›å¿…é ˆç¨è‡ªé¢å°å‰©ä¸‹çš„æŒ‘æˆ°ï¼Œåªèƒ½ä¾é ä»–å°è«ç‰¹æ‹‰æ™®èªæ–¹å‘ç³»çµ±çš„ç‰‡æ®µçŸ¥è­˜ä¾†æŒ‡å¼•ä»–ã€‚</p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="challenge-box" data-puzzle-lang="mwt">
                        <h3>Challenge 1: Qele ave "yow" aÄ“?</h3>
                        <p>David m-et so teytey qele ave Vetea m-et me-helhleh "That's not what yow means here!" NÄ“k so teytey ave na-tqoy mwotlap "yow" aÄ“ qele liwo?</p>
                        <p><em>Hint: Van mÌ„Ål le-mdal na-tbÄ“q directional system a Mwotlap. "Yow" so et matmat qiyig aÄ“ context ave?</em></p>
                    </div>
                    <div class="challenge-box" data-puzzle-lang="adv" style="display: none;">
                        <h3>Challenge 1: Figure out what Vetea means</h3>
                        <p>You must decode why Vetea shouted about "yow" meaning something different. Consider the difference between <strong>geocentric</strong> vs <strong>deictic</strong> usage of Mwotlap directionals in different spatial scales.</p>
                        <p><em>Advanced hint: The letter uses "yow" consistently, but Happy Island context requires understanding whether this refers to absolute geographic directions or relative positions from a specific viewpoint.</em></p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="narration" data-story-lang="en">
                        <p>Even knowing that this quest doesn't allow mistakes, David picks up the letter and maps, determined to solve the puzzle for the other huts. He must use the Mwotlap directional clues to determine the correct positions of huts A, B, and C relative to the chapel.</p>
                    </div>
                    <div class="narration chinese-text" data-story-lang="zh" style="display: none;">
                        <p>å³ä½¿çŸ¥é“é€™å€‹ä»»å‹™ä¸å…è¨±çŠ¯éŒ¯ï¼Œå¤§è¡›é‚„æ˜¯æ‹¿èµ·ä¿¡ä»¶å’Œåœ°åœ–ï¼Œæ±ºå¿ƒè¦è§£æ±ºå…¶ä»–å°å±‹çš„è¬é¡Œã€‚ä»–å¿…é ˆä½¿ç”¨è«ç‰¹æ‹‰æ™®èªçš„æ–¹å‘ç·šç´¢ä¾†ç¢ºå®šå°å±‹Aã€Bå’ŒCç›¸å°æ–¼æ•™å ‚çš„æ­£ç¢ºä½ç½®ã€‚</p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="challenge-box" data-puzzle-lang="mwt">
                        <h3>Challenge 2: Sok n-Ä“mÌ„ su ABC</h3>
                        <p>Na-tbÄ“q gÄ“n aÄ“:</p>
                        <div class="mwotlap-text">
                            <p>N-Ä“mÌ„ su A tog tÃ´ lok hag l-Ä“mÌ„ yonÌ„. N-Ä“mÌ„ yon tog tÃ´ lok hÅw l-Ä“mÌ„ su A.<br>
                            N-Ä“mÌ„ su B tog tÃ´ lok yow l-Ä“mÌ„ yonÌ„. N-Ä“mÌ„ yon tog tÃ´ lok hay l-Ä“mÌ„ su B.<br>
                            N-Ä“mÌ„ su C tog tÃ´ lok hÅw l-Ä“mÌ„ su B. N-Ä“mÌ„ su B tog tÃ´ lok hag l-Ä“mÌ„ su C.</p>
                        </div>
                        <p>Qele tateh nÄ“k so van-dÄ“mdÄ“m na-tqoy "lok" gÄ“n? Na-lÄ“k spatial relation aÄ“ qele liwo?</p>
                    </div>
                    <div class="challenge-box" data-puzzle-lang="adv" style="display: none;">
                        <h3>Challenge 2: Map the Hut Constellation</h3>
                        <p>Using advanced Mwotlap spatial construction patterns with <strong>mediate reference</strong> (lok + directional), decode the relative positions:</p>
                        <div class="mwotlap-text">
                            <p>Hut A is 'hag'-ward of chapel; chapel is 'hÅw'-ward of Hut A<br>
                            Hut B is 'yow'-ward of chapel; chapel is 'hay'-ward of Hut B<br>
                            Hut C is 'hÅw'-ward of Hut B; Hut B is 'hag'-ward of Hut C</p>
                        </div>
                        <p><em>Advanced analysis required: Apply understanding of reciprocal spatial relationships and directional systems to create accurate positioning map.</em></p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="narration" data-story-lang="en">
                        <p>This time, David can't find any totem poles near the huts - the residents seem to have removed them. So he decides to ask the residents directly, using his painting skills to illustrate each hut and then asking which one had a totem pole in the correct location.</p>
                    </div>
                    <div class="narration chinese-text" data-story-lang="zh" style="display: none;">
                        <p>é€™ä¸€æ¬¡ï¼Œå¤§è¡›åœ¨å°å±‹é™„è¿‘æ‰¾ä¸åˆ°ä»»ä½•åœ–é¨°æŸ±â€”â€”å±…æ°‘å€‘ä¼¼ä¹å·²ç¶“ç§»é™¤äº†å®ƒå€‘ã€‚æ‰€ä»¥ä»–æ±ºå®šç›´æ¥è©¢å•å±…æ°‘ï¼Œåˆ©ç”¨ä»–çš„ç¹ªç•«æŠ€å·§ä¾†æç¹ªæ¯å€‹å°å±‹ï¼Œç„¶å¾Œè©¢å•å“ªä¸€å€‹åœ¨æ­£ç¢ºä½ç½®æœ‰åœ–é¨°æŸ±ã€‚</p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="comic-panel">
                        <div class="placeholder">
                            [Comic Panel 4: David showing his drawings to the Happy Island residents and asking about the totem poles - replace with your actual comic panel]
                        </div>
                    </div>
                </div>

                <div class="story-element">
                    <div class="challenge-box" data-puzzle-lang="mwt">
                        <h3>Challenge 3: Qele tateh David so ni-visa?</h3>
                        <p>David so teyhÄ“ so ni-visa ige: "Mey ave n-Ä“mÌ„ su, na-hanÌ„ Ä“mÌ„ ne-vet aÄ“ yow l-Ä“mÌ„ Åk?"</p>
                        <p>Ba nÄ“k m-et so mat qele ave na-tbÄ“q spatial construction gÄ“n aÄ“ no-qon? Qele tateh nÄ“k so tÄ“y na-visa mwotlap tateh aÄ“?</p>
                        <p><em>Van lep: Na-lÄ“k existential predicate wa interrogative construction patterns.</em></p>
                    </div>
                    <div class="challenge-box" data-puzzle-lang="adv" style="display: none;">
                        <h3>Challenge 3: Formulate the Critical Question</h3>
                        <p>David needs to ask: "Which hut has a rock/totem pole on its 'yow' side?"</p>
                        <p>Construct this question using proper Mwotlap syntax, considering:</p>
                        <ul style="text-align: left; margin: 15px 0;">
                            <li><strong>Interrogative formation</strong> with "mey ave" (which one)</li>
                            <li><strong>Existential/possessive construction</strong> patterns</li>
                            <li><strong>Spatial relation encoding</strong> with locative prefixes</li>
                            <li><strong>Mediate reference systems</strong> for relative positioning</li>
                        </ul>
                        <p><em>Advanced Challenge: Your answer should demonstrate mastery of Mwotlap morphosyntactic patterns beyond basic directional vocabulary.</em></p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="narration" data-story-lang="en">
                        <p>With the residents' help and his growing understanding of Mwotlap spatial systems, David finally solves the puzzle and finds the location of Stone E. The treasure hunt continues, but now he carries not just the weight of the remaining stones to find, but also the hope that Vetea will recover to see their quest completed.</p>
                        <p style="text-align: center; margin-top: 30px;">
                            <strong>The adventure continues, but the linguistic puzzles end here...</strong>
                        </p>
                    </div>
                    <div class="narration chinese-text" data-story-lang="zh" style="display: none;">
                        <p>åœ¨å±…æ°‘çš„å¹«åŠ©å’Œä»–å°è«ç‰¹æ‹‰æ™®èªç©ºé–“ç³»çµ±çš„ä¸æ–·ç†è§£ä¸‹ï¼Œå¤§è¡›çµ‚æ–¼è§£é–‹äº†è¬é¡Œï¼Œæ‰¾åˆ°äº†å¯¶çŸ³Eçš„ä½ç½®ã€‚å°‹å¯¶ä¹‹æ—…é‚„åœ¨ç¹¼çºŒï¼Œä½†ç¾åœ¨ä»–ä¸åƒ…æ‰¿è¼‰è‘—å°‹æ‰¾å‰©é¤˜å¯¶çŸ³çš„é‡ä»»ï¼Œä¹Ÿæ‰¿è¼‰è‘—ç¶­æäºèƒ½å¤ åº·å¾©ä¸¦çœ‹åˆ°ä»–å€‘ä»»å‹™å®Œæˆçš„å¸Œæœ›ã€‚</p>
                        <p style="text-align: center; margin-top: 30px;">
                            <strong>å†’éšªé‚„åœ¨ç¹¼çºŒï¼Œä½†èªè¨€å­¸è¬é¡Œåˆ°æ­¤çµæŸ...</strong>
                        </p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="challenge-box" style="background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); border-color: #16a085;">
                        <h3 style="color: white;">ğŸ”“ Answer Keys & Solutions</h3>
                        <p style="text-align: center;">
                            <button onclick="showAnswers()" style="
                                background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
                                border: none;
                                color: white;
                                padding: 15px 30px;
                                font-size: 1.2em;
                                border-radius: 30px;
                                cursor: pointer;
                                box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
                                transition: all 0.3s ease;
                                font-weight: bold;
                            " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                                ğŸ—ï¸ Reveal Answer Keys
                            </button>
                        </p>
                        <div id="answer-section" style="display: none; margin-top: 25px; padding-top: 25px; border-top: 2px solid rgba(255, 255, 255, 0.3);">
                            <div data-puzzle-lang="mwt">
                                <h4 style="color: white; margin-bottom: 15px;">Na-tbÄ“q Åk:</h4>
                                <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin: 10px 0;">
                                    <p><strong>Challenge 1:</strong> "Yow" aÄ“ directional geocentric (seawards) ba deictic context aÄ“ different. Vetea m-et so teytey ave David m-et so van-tamat "yow" aÄ“ absolute direction ba no local/relative position.</p>
                                </div>
                                <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin: 10px 0;">
                                    <p><strong>Challenge 2:</strong> Na-map spatial relations: Chapel tog center, Hut A tog hag (east), Hut B tog yow (seawards), Hut C tog between B wa chapel lok hÅw.</p>
                                </div>
                                <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin: 10px 0;">
                                    <p><strong>Challenge 3:</strong> "Mey ave n-Ä“mÌ„ su, na-hanÌ„ Ä“mÌ„ ne-vet aÄ“ yow l-Ä“mÌ„ Åk?" (Which hut has a stone/totem on its yow side?)</p>
                                </div>
                            </div>
                            <div data-puzzle-lang="adv" style="display: none;">
                                <h4 style="color: white; margin-bottom: 15px;">Analytical Solutions:</h4>
                                <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin: 10px 0;">
                                    <p><strong>Challenge 1:</strong> Geocentric vs. deictic directional interpretation. "Yow" functions as absolute geocentric reference (seawards) in letter context but requires deictic/relative interpretation at local scale on Happy Island.</p>
                                </div>
                                <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin: 10px 0;">
                                    <p><strong>Challenge 2:</strong> Mediate reference system analysis: lok + directional creates reciprocal spatial relationships. Solution requires mapping all constraints simultaneously to determine unique hut constellation.</p>
                                </div>
                                <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin: 10px 0;">
                                    <p><strong>Challenge 3:</strong> Morphosyntactic construction: [mey ave] + [n-Ä“mÌ„ su] + [existential predicate] + [spatial locative]. Demonstrates mastery of interrogative + possessive + spatial systems.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let storyLanguage = 'en';
        let puzzleLanguage = 'mwt';

        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-trigger').forEach(trigger => {
                trigger.classList.remove('active');
            });
            
            document.getElementById(tabName + '-content').classList.add('active');
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            document.getElementById('sidebar').classList.add('expanded');
            document.querySelector('.content-area').classList.add('sidebar-open');
        }

        function closeSidebar() {
            document.getElementById('sidebar').classList.remove('expanded');
            document.querySelector('.content-area').classList.remove('sidebar-open');
        }

        function toggleStoryLanguage() {
            const checkbox = document.getElementById('storyLang');
            checkbox.checked = !checkbox.checked;
            
            const newLang = checkbox.checked ? 'zh' : 'en';
            console.log('Story toggle clicked! New language:', newLang);
            
            document.querySelectorAll(`[data-story-lang="${storyLanguage}"]`).forEach(el => {
                el.style.display = 'none';
            });
            
            document.querySelectorAll(`[data-story-lang="${newLang}"]`).forEach(el => {
                el.style.display = 'block';
            });
            
            storyLanguage = newLang;
            updateLanguageLabels('story', checkbox.checked);
        }

        function togglePuzzleLanguage() {
            const checkbox = document.getElementById('puzzleLang');
            checkbox.checked = !checkbox.checked;
            
            const newLang = checkbox.checked ? 'adv' : 'mwt';
            console.log('Puzzle toggle clicked! New language:', newLang);
            
            document.querySelectorAll(`[data-puzzle-lang="${puzzleLanguage}"]`).forEach(el => {
                el.style.display = 'none';
            });
            
            document.querySelectorAll(`[data-puzzle-lang="${newLang}"]`).forEach(el => {
                el.style.display = 'block';
            });
            
            puzzleLanguage = newLang;
            updateLanguageLabels('puzzle', checkbox.checked);
        }

        function updateLanguageLabels(type, isChecked) {
            const lang1 = document.getElementById(type + 'Lang1');
            const lang2 = document.getElementById(type + 'Lang2');
            
            if (isChecked) {
                lang1.style.opacity = '0.5';
                lang1.style.fontWeight = 'normal';
                lang2.style.opacity = '1';
                lang2.style.fontWeight = 'bold';
            } else {
                lang1.style.opacity = '1';
                lang1.style.fontWeight = 'bold';
                lang2.style.opacity = '0.5';
                lang2.style.fontWeight = 'normal';
            }
        }

        document.querySelectorAll('.tab-trigger').forEach(trigger => {
            trigger.addEventListener('click', function() {
                document.getElementById('sidebar').classList.add('expanded');
                document.querySelector('.content-area').classList.add('sidebar-open');
            });
        });

        document.addEventListener('DOMContentLoaded', function() {
            updateLanguageLabels('story', false);
            updateLanguageLabels('puzzle', false);
        });

        function showAnswers() {
            const answerSection = document.getElementById('answer-section');
            const button = event.target;
            
            if (answerSection.style.display === 'none') {
                answerSection.style.display = 'block';
                button.innerHTML = 'ğŸ”’ Hide Answer Keys';
                button.style.background = 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)';
            } else {
                answerSection.style.display = 'none';
                button.innerHTML = 'ğŸ—ï¸ Reveal Answer Keys';
                button.style.background = 'linear-gradient(135deg, #f39c12 0%, #e67e22 100%)';
            }
        }
    </script>
</body>
</html>narration" data-story-lang="en">
                        <p>It all began with a bottle washed ashore. David, a travel blogger drawn to the unexpected, found it half-buried in the sand on a remote Taiwanese beach months ago. Inside was a letterâ€”weathered, sun-bleached, and written in a language he couldn't recognize.</p>
                        <p>He turned to Reddit for help. Weeks passed. Then months. Just when he was ready to give up, a message finally arrived from Vetea, a young man from Vanuatu who spoke Mwotlapâ€”a language spoken by only around 2,000 people on the island of Motalava.</p>
                    </div>
                    <div class="narration chinese-text" data-story-lang="zh" style="display: none;">
                        <p>é€™ä¸€åˆ‡éƒ½å§‹æ–¼ä¸€å€‹è¢«æ²–ä¸Šå²¸çš„ç“¶å­ã€‚å¤§è¡›æ˜¯ä¸€åè¢«æ„å¤–æ‰€å¸å¼•çš„æ—…è¡Œéƒ¨è½å®¢ï¼Œå¹¾å€‹æœˆå‰åœ¨å°ç£ä¸€å€‹åé æµ·ç˜ä¸Šç™¼ç¾äº†é€™å€‹åŠåŸ‹åœ¨æ²™ä¸­çš„ç“¶å­ã€‚è£¡é¢æœ‰ä¸€å°ä¿¡â€”â€”ç¶“å—é¢¨é›¨ä¾µè•ã€è¢«é™½å…‰æ¼‚ç™½ï¼Œç”¨ä»–ç„¡æ³•è¾¨èªçš„èªè¨€å¯«æˆã€‚</p>
                        <p>ä»–å‘Redditæ±‚åŠ©ã€‚å¹¾é€±éå»äº†ï¼Œç„¶å¾Œæ˜¯å¹¾å€‹æœˆã€‚å°±åœ¨ä»–æº–å‚™æ”¾æ£„çš„æ™‚å€™ï¼Œçµ‚æ–¼æ”¶åˆ°äº†ä¸€æ¢è¨Šæ¯ï¼Œä¾†è‡ªç“¦åŠªé˜¿åœ–çš„å¹´è¼•äººç¶­æäºï¼Œä»–æœƒèªªè«ç‰¹æ‹‰æ™®èªâ€”â€”ä¸€ç¨®åªæœ‰ç´„2000äººåœ¨è«å¡”æ‹‰ç“¦å³¶ä¸Šä½¿ç”¨çš„èªè¨€ã€‚</p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="
