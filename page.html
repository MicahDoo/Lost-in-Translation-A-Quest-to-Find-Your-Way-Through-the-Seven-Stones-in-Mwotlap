<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>七顆神秘寶石 | The Seven Mystic Stones</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            line-height: 1.6;
            color: #2c1810;
            background: 
                radial-gradient(circle at 20% 80%, rgba(255, 206, 84, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(72, 187, 120, 0.3) 0%, transparent 50%),
                linear-gradient(135deg, #74b9ff 0%, #0984e3 30%, #00b894 70%, #00cec9 100%);
            min-height: 100vh;
            background-attachment: fixed;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="40" r="1" fill="rgba(255,255,255,0.15)"/><circle cx="40" cy="80" r="1.5" fill="rgba(255,255,255,0.1)"/></svg>') repeat,
                radial-gradient(circle at 30% 60%, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 200px 200px, 50px 50px;
            opacity: 0.6;
            pointer-events: none;
            z-index: -1;
        }

        .main-container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            position: fixed;
            top: 120px;
            left: -380px;
            width: 380px;
            height: calc(100vh - 120px);
            background: 
                linear-gradient(135deg, rgba(101, 67, 33, 0.95) 0%, rgba(139, 69, 19, 0.95) 100%);
            border-radius: 0 20px 20px 0;
            z-index: 1000;
            transition: left 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            overflow: visible;
            backdrop-filter: blur(15px);
            border: 2px solid rgba(210, 180, 140, 0.3);
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .sidebar.expanded {
            left: 0px;
        }

        .sidebar-content {
            padding: 25px;
            color: #f4f1de;
            width: 100%;
            height: 100%;
            overflow-y: auto;
        }

        .sidebar-content::-webkit-scrollbar {
            width: 12px;
        }

        .sidebar-content::-webkit-scrollbar-track {
            background: rgba(101, 67, 33, 0.3);
            border-radius: 10px;
        }

        .sidebar-content::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #cd853f 0%, #daa520 100%);
            border-radius: 10px;
            border: 2px solid rgba(101, 67, 33, 0.3);
        }

        .sidebar-content::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #daa520 0%, #ffd700 100%);
        }

        /* Firefox scrollbar styling */
        .sidebar-content {
            scrollbar-width: thin;
            scrollbar-color: #cd853f rgba(101, 67, 33, 0.3);
        }

        .bookmark-tabs {
            position: absolute;
            right: -60px;
            top: 0;
            width: 70px;
            height: 100%;
        }

        .tab-trigger {
            position: absolute;
            right: 0;
            background: linear-gradient(135deg, #8b4513 0%, #654321 100%);
            border: none;
            color: #f4f1de;
            padding: 25px 10px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            white-space: nowrap;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            border-radius: 0 15px 15px 0;
            min-height: 120px;
            width: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            box-shadow: 
                3px 3px 6px rgba(0, 0, 0, 0.3),
                2px 2px 4px rgba(0, 0, 0, 0.2);
            border: 2px solid rgba(210, 180, 140, 0.4);
        }

        .tab-trigger:hover {
            background: linear-gradient(135deg, #a0522d 0%, #8b4513 100%);
            box-shadow: 
                4px 4px 12px rgba(0, 0, 0, 0.4),
                3px 3px 8px rgba(0, 0, 0, 0.3);
            transform: scale(1.05);
        }

        .tab-trigger.active {
            background: linear-gradient(135deg, #cd853f 0%, #daa520 100%);
            z-index: 1002;
            box-shadow: 
                8px 8px 25px rgba(0, 0, 0, 0.5),
                6px 6px 15px rgba(0, 0, 0, 0.4),
                4px 4px 10px rgba(0, 0, 0, 0.3);
            transform: translateX(-5px) scale(1.1);
            border: 2px solid #ffd700;
        }

        .tab-trigger:nth-child(1) { top: 100px; }
        .tab-trigger:nth-child(2) { 
            top: 240px; 
            z-index: 1000;
        }

        .tab-trigger:nth-child(2).active {
            z-index: 1002;
        }

        .tab-icon {
            display: block;
            font-size: 1.6em;
            margin-bottom: 10px;
            transform: rotate(90deg);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .tab-text {
            font-size: 0.9em;
            font-weight: bold;
            letter-spacing: 2px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .tab-content {
            display: none;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid rgba(244, 241, 222, 0.3);
        }

        .tab-content.active {
            display: block;
        }

        .close-sidebar {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(139, 69, 19, 0.8);
            border: 2px solid #daa520;
            color: #f4f1de;
            font-size: 1.8em;
            cursor: pointer;
            z-index: 1002;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .close-sidebar:hover {
            background: rgba(205, 133, 63, 0.9);
            transform: rotate(90deg) scale(1.1);
        }

        .content-area {
            flex: 1;
            margin-left: 0px;
            padding: 20px;
            max-width: 100vw;
            transition: margin-left 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .content-area.sidebar-open {
            margin-left: 380px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 50px 30px;
            background: 
                linear-gradient(135deg, rgba(244, 241, 222, 0.95) 0%, rgba(255, 248, 220, 0.95) 100%);
            border-radius: 20px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(15px);
            border: 3px solid rgba(210, 180, 140, 0.5);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
            animation: shimmer 4s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }

        h1 {
            font-size: 3.5em;
            background: linear-gradient(135deg, #8b4513 0%, #cd853f 50%, #daa520 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 1;
        }

        .subtitle {
            font-size: 1.4em;
            color: #8b4513;
            font-style: italic;
            margin-bottom: 25px;
            position: relative;
            z-index: 1;
        }

        .language-controls {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 25px 0;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }

        .language-switch {
            display: flex;
            align-items: center;
            gap: 15px;
            background: 
                linear-gradient(135deg, rgba(139, 69, 19, 0.9) 0%, rgba(101, 67, 33, 0.9) 100%);
            padding: 15px 25px;
            border-radius: 30px;
            box-shadow: 
                0 8px 16px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(210, 180, 140, 0.4);
        }

        .language-switch label {
            font-weight: bold;
            color: #f4f1de;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 70px;
            height: 38px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #8b4513 0%, #654321 100%);
            transition: .4s;
            border-radius: 38px;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 30px;
            width: 30px;
            left: 4px;
            bottom: 4px;
            background: linear-gradient(135deg, #f4f1de 0%, #daa520 100%);
            transition: .4s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        input:checked + .slider {
            background: linear-gradient(135deg, #cd853f 0%, #daa520 100%);
        }

        input:focus + .slider {
            box-shadow: 0 0 8px rgba(218, 165, 32, 0.6);
        }

        input:checked + .slider:before {
            transform: translateX(32px);
            background: linear-gradient(135deg, #ffd700 0%, #f4f1de 100%);
        }

        .language-labels {
            display: flex;
            justify-content: space-between;
            width: 70px;
            font-size: 0.9em;
            margin-top: 8px;
            transition: all 0.3s ease;
        }

        .language-labels span {
            transition: all 0.3s ease;
            color: #f4f1de;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .story-content {
            background: 
                linear-gradient(135deg, rgba(244, 241, 222, 0.95) 0%, rgba(255, 248, 220, 0.95) 100%);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 
                0 20px 40px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            margin: 30px 0;
            backdrop-filter: blur(15px);
            border: 3px solid rgba(210, 180, 140, 0.5);
            position: relative;
        }

        .story-element {
            margin: 40px 0;
        }

        .narration {
            background: 
                linear-gradient(135deg, rgba(139, 69, 19, 0.1) 0%, rgba(210, 180, 140, 0.1) 100%);
            border-left: 6px solid #cd853f;
            padding: 30px;
            border-radius: 0 15px 15px 0;
            font-style: italic;
            box-shadow: 
                0 8px 16px rgba(0, 0, 0, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            position: relative;
            border: 2px solid rgba(205, 133, 63, 0.2);
        }

        .narration::before {
            content: "📜";
            position: absolute;
            top: -12px;
            left: 25px;
            background: linear-gradient(135deg, #cd853f 0%, #daa520 100%);
            color: white;
            padding: 8px 15px;
            border-radius: 25px;
            font-size: 0.9em;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .comic-panel {
            background: 
                linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border: 4px solid #8b4513;
            border-radius: 15px;
            padding: 40px;
            margin: 25px 0;
            text-align: center;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                0 15px 30px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.8);
            position: relative;
            border-image: linear-gradient(45deg, #8b4513, #cd853f, #daa520, #8b4513) 4;
        }

        .comic-panel::before {
            content: "🎭 Comic Panel";
            position: absolute;
            top: -18px;
            left: 30px;
            background: linear-gradient(135deg, #8b4513 0%, #cd853f 100%);
            color: #f4f1de;
            padding: 10px 25px;
            border-radius: 30px;
            font-size: 1em;
            font-weight: bold;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .challenge-box {
            background: 
                linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            border: 4px solid #8b0000;
            border-radius: 20px;
            padding: 35px;
            margin: 35px 0;
            box-shadow: 
                0 15px 30px rgba(231, 76, 60, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            color: white;
            position: relative;
        }

        .challenge-box::before {
            content: "⚡ LINGUISTIC CHALLENGE";
            position: absolute;
            top: -18px;
            left: 30px;
            background: linear-gradient(135deg, #8b0000 0%, #dc143c 100%);
            color: white;
            padding: 10px 25px;
            border-radius: 30px;
            font-size: 1em;
            font-weight: bold;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }

        .challenge-box h3 {
            color: white;
            margin-bottom: 25px;
            font-size: 1.8em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .placeholder {
            color: #8b4513;
            font-style: italic;
            text-align: center;
            padding: 25px;
            border: 3px dashed #cd853f;
            border-radius: 12px;
            background: rgba(244, 241, 222, 0.5);
        }

        .map-container {
            background: 
                linear-gradient(135deg, rgba(244, 241, 222, 0.9) 0%, rgba(210, 180, 140, 0.9) 100%);
            border: 4px solid #8b4513;
            border-radius: 15px;
            padding: 35px;
            margin: 25px 0;
            text-align: center;
            min-height: 350px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(139, 69, 19, 0.1) 2px, transparent 2px),
                radial-gradient(circle at 75% 75%, rgba(205, 133, 63, 0.1) 1px, transparent 1px);
            background-size: 30px 30px, 15px 15px;
            box-shadow: 
                inset 0 4px 8px rgba(0, 0, 0, 0.1),
                0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .treasure-hunt-content {
            background: 
                linear-gradient(135deg, rgba(255, 215, 0, 0.2) 0%, rgba(255, 165, 0, 0.2) 100%);
            border: 4px solid #daa520;
            padding: 30px;
            border-radius: 15px;
            text-align: left;
            box-shadow: 
                inset 0 4px 8px rgba(218, 165, 32, 0.2),
                0 8px 16px rgba(0, 0, 0, 0.1);
            position: relative;
            color: #2c1810;
        }

        .treasure-hunt-content::before {
            content: "🗞️ THE MYSTERIOUS LETTER";
            position: absolute;
            top: -15px;
            left: 25px;
            background: linear-gradient(135deg, #daa520 0%, #ffd700 100%);
            color: #2c1810;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 0.9em;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .treasure-hunt-content h3 {
            color: #8b4513;
            margin-bottom: 20px;
            font-size: 1.6em;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .mwotlap-text {
            background: rgba(72, 187, 120, 0.1);
            border-left: 5px solid #00b894;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 12px 12px 0;
            font-family: 'Courier New', monospace;
            font-style: normal;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .chinese-text {
            font-family: 'Microsoft JhengHei', 'Noto Sans CJK TC', sans-serif;
            line-height: 1.8;
        }

        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }
            
            .sidebar {
                position: relative;
                width: 100%;
                height: auto;
                left: 0;
                top: 0;
                border-radius: 0;
            }
            
            .content-area {
                margin-left: 0;
                max-width: 100vw;
            }
            
            h1 {
                font-size: 2.5em;
            }
            
            .language-controls {
                flex-direction: column;
                align-items: center;
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="sidebar" id="sidebar">
            <div class="bookmark-tabs">
                <button class="tab-trigger active" onclick="showTab('letter')" data-tab="letter">
                    <span class="tab-icon">🗞️</span>
                    <span class="tab-text">LETTER</span>
                </button>
                <button class="tab-trigger" onclick="showTab('maps')" data-tab="maps">
                    <span class="tab-icon">🗺️</span>
                    <span class="tab-text">MAPS</span>
                </button>
            </div>
            
            <button class="close-sidebar" onclick="closeSidebar()">&times;</button>
            <div class="sidebar-content">
                <div class="tab-content active" id="letter-content">
                    <div class="treasure-hunt-content">
                        <h3>🌊 Na-lēt ni-big</h3>
                        <div class="mwotlap-text" data-puzzle-lang="mwt">
                            <p><strong>Na-lēt Mwotlap:</strong></p>
                            <p>
                                Qele ave nēk so sok ne-vet yon̄ liviyô?<br>
                                Van le-pnō M̄otlap. Sok mahē alge be-et.<br>
                                At yow, nēk so et na-pnō susu. Ne-vet A aē.<br>
                                At hōw, nēk so et na-hōm ni-myen. Ne-vet B aē.<br>
                                At hay, nēk so et na-han̄ wa ne-vet liwo. Ne-vet C aē.<br>
                                Ēgēn, nēk van le-sle Lahlap. Tō hō van le-sle na-wha a na-pnō men.<br>
                                Van hōw hiy na-han̄. Tō van hay, nēk so et nē-lē.<br>
                                Van hay a le-lo lē. Tō van hag, van yow, van hag, van hay, van hay, van hay. Ne-vet D aē.<br>
                                Van m̄ōl. Tō van hay, van hag, van yow, van hay, tō van yow le-lo lē.<br>
                                Van hag wa van yow, nēk so et na-sle qet.<br>
                                Hō hag hiy na-pnō itôk.<br><br>
                                Sok n-ēm̄ yon̄! N-ēm̄ su vētēl aē walēg l-ēm̄ yon̄.<br>
                                N-ēm̄ su A tog tô lok hag l-ēm̄ yon̄. N-ēm̄ yon tog tô lok hōw l-ēm̄ su A.<br>
                                N-ēm̄ su B tog tô lok yow l-ēm̄ yon̄. N-ēm̄ yon tog tô lok hay l-ēm̄ su B.<br>
                                N-ēm̄ su C tog tô lok hōw l-ēm̄ su B. N-ēm̄ su B tog tô lok hag l-ēm̄ su C.<br><br>
                                Na-han ēm̄ ne-vet aē yow l-ēm̄ ōk?<br>
                                Ne-vet E tō a laln̄e ne-vet liwo gēn.
                            </p>
                        </div>
                        
                        <div class="mwotlap-text" data-puzzle-lang="adv" style="display: none;">
                            <p><strong>Advanced Linguistic Protocol:</strong></p>
                            <p>
                                Directional-discovery.sequence = [M̄otlap.watchtower → yow:island.A, hōw:lighthouse.B, hay:totem+rock.C]<br>
                                Navigation.chain = [Lahlap.port → Men.island → directional.maze → Itôk.island]<br>
                                Spatial.constraints = {<br>
                                &nbsp;&nbsp;chapel.reference → hut.constellation.mapping<br>
                                &nbsp;&nbsp;mediate.lok + directional.system<br>
                                &nbsp;&nbsp;reciprocal.positioning.verification<br>
                                }<br>
                                Puzzle.condition = existential(stone.E) ∩ location(yow.side) ∩ reference(hut.unknown)<br>
                                Query.formulation = interrogative.mey + spatial.construction + verification.protocol
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="tab-content" id="maps-content">
                    <h4 style="color: #f4f1de; text-align: center; margin-bottom: 20px;" data-puzzle-lang="mwt">Na-hap yon̄ vētēl</h4>
                    <h4 style="color: #f4f1de; text-align: center; margin-bottom: 20px; display: none;" data-puzzle-lang="adv">Cartographic.References</h4>
                    
                    <div class="map-container">
                        <div class="placeholder" data-puzzle-lang="mwt">
                            [Hap A: Na-pnō M̄otlap - mahē alge, ne-vet A B C, na-tēy Kaikoa]
                        </div>
                        <div class="placeholder" data-puzzle-lang="adv" style="display: none;">
                            [Map.1: M̄otlap.topography - watchtower.coordinates + stone.triangle.ABC + Kaikoa.route.trace]
                        </div>
                    </div>
                    
                    <div class="map-container">
                        <div class="placeholder" data-puzzle-lang="mwt">
                            [Hap B: Na-pnō Men - nē-lē bah na-tēy le-lo maze]
                        </div>
                        <div class="placeholder" data-puzzle-lang="adv" style="display: none;">
                            [Map.2: Men.island.structure - cave.system + maze.navigation.D + exit.protocol]
                        </div>
                    </div>
                    
                    <div class="map-container">
                        <div class="placeholder" data-puzzle-lang="mwt">
                            [Hap C: Na-pnō Itôk - n-ēm̄ yon̄, n-ēm̄ su A B C, na-han̄ yow]
                        </div>
                        <div class="placeholder" data-puzzle-lang="adv" style="display: none;">
                            [Map.3: Itôk.settlement.grid - chapel.central + hut.constellation.ABC + totem.positioning.matrix]
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="content-area">
            <header>
                <h1>七顆神秘寶石</h1>
                <h1 style="font-size: 2em; margin-top: -10px;">The Seven Mystic Stones</h1>
                <p class="subtitle">A Mwotlap Linguistic Treasure Hunt</p>
                
                <div class="language-controls">
                    <div class="language-switch">
                        <label>Story Language:</label>
                        <div class="switch" onclick="toggleStoryLanguage()">
                            <input type="checkbox" id="storyLang">
                            <span class="slider"></span>
                        </div>
                        <div class="language-labels">
                            <span id="storyLang1">EN</span>
                            <span id="storyLang2">中文</span>
                        </div>
                    </div>
                    
                    <div class="language-switch">
                        <label>Puzzle Language:</label>
                        <div class="switch" onclick="togglePuzzleLanguage()">
                            <input type="checkbox" id="puzzleLang">
                            <span class="slider"></span>
                        </div>
                        <div class="language-labels">
                            <span id="puzzleLang1">MWT</span>
                            <span id="puzzleLang2">ADV</span>
                        </div>
                    </div>
                </div>
            </header>

            <div class="story-content">
                <div class="story-element">
                    <div class="narration" data-story-lang="en">
                        <p>It all began with a bottle washed ashore. David, a travel blogger drawn to the unexpected, found it half-buried in the sand on a remote Taiwanese beach months ago. Inside was a letter—weathered, sun-bleached, and written in a language he couldn't recognize.</p>
                        <p>He turned to Reddit for help. Weeks passed. Then months. Just when he was ready to give up, a message finally arrived from Vetea, a young man from Vanuatu who spoke Mwotlap—a language spoken by only around 2,000 people on the island of Motalava.</p>
                    </div>
                    <div class="narration chinese-text" data-story-lang="zh" style="display: none;">
                        <p>這一切都始於一個被沖上岸的瓶子。大衛是一名被意外所吸引的旅行部落客，幾個月前在台灣一個偏遠海灘上發現了這個半埋在沙中的瓶子。裡面有一封信——經受風雨侵蝕、被陽光漂白，用他無法辨認的語言寫成。</p>
                        <p>他向Reddit求助。幾週過去了，然後是幾個月。就在他準備放棄的時候，終於收到了一條訊息，來自瓦努阿圖的年輕人維提亞，他會說莫特拉普語——一種只有約2000人在莫塔拉瓦島上使用的語言。</p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="comic-panel">
                        <div class="placeholder">
                            [Comic Panel 1: David finding the mysterious bottle on a Taiwanese beach - replace with your actual comic panel]
                        </div>
                    </div>
                </div>

                <div class="story-element">
                    <div class="narration" data-story-lang="en">
                        <p>Vetea had read the letter. It described seven mystic stones hidden across the islands of Vanuatu, along with cryptic directions to find them. Three matched the description of stones once discovered by his grandfather Kaikoa—mysterious, glimmering relics etched with unexplainable patterns.</p>
                        <p>According to the letter, the author—a Mwotlap traveler—had scattered the stones across Vanuatu, turning their hiding places into a game, and leaving clues behind for those curious enough to follow.</p>
                    </div>
                    <div class="narration chinese-text" data-story-lang="zh" style="display: none;">
                        <p>維提亞讀了這封信。信中描述了隱藏在瓦努阿圖各島嶼上的七顆神秘寶石，以及尋找它們的神秘指示。其中三顆符合他祖父卡伊科阿曾經發現的石頭描述——神秘的、閃閃發光的遺物，刻著無法解釋的圖案。</p>
                        <p>根據信中所述，作者——一位莫特拉普語的旅行者——將這些石頭散布在瓦努阿圖各地，將它們的藏身之處變成了一個遊戲，為那些足夠好奇的人留下了線索。</p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="comic-panel">
                        <div class="placeholder">
                            [Comic Panel 2: Kaikoa showing them the watchtower - "Gēn van hag!" - replace with your actual comic panel]
                        </div>
                    </div>
                </div>

                <div class="story-element">
                    <div class="narration" data-story-lang="en">
                        <p>Now, with mystery calling and clues in hand, David joined Vetea on a journey into the heart of the Pacific—chasing legends, decoding directions, and hunting for the lost Seven Mystic Stones. The incredible journey started with Kaikoa showing them around from his watchtower, pointing out landmarks and the locations where he had discovered the first three stones.</p>
                        <p>But fate had other plans...</p>
                    </div>
                    <div class="narration chinese-text" data-story-lang="zh" style="display: none;">
                        <p>現在，帶著神秘的召喚和手中的線索，大衛與維提亞一起踏上了深入太平洋心臟地帶的旅程——追尋傳說、解碼方向、尋找失落的七顆神秘寶石。這段不可思議的旅程始於卡伊科阿從他的瞭望塔帶領他們參觀，指出地標和他發現前三顆石頭的位置。</p>
                        <p>但命運另有安排...</p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="comic-panel">
                        <div class="placeholder">
                            [Comic Panel 3: The tragic accident - Vetea shouting "That's not what yow means here!" as he throws himself toward the bomb - replace with your actual comic panel]
                        </div>
                    </div>
                </div>

                <div class="story-element">
                    <div class="narration" data-story-lang="en">
                        <p>During their search on Happy Island, David mistakenly dug under the wrong rock, triggering an explosive device. Vetea immediately recognized the countdown beeps and realized it was planted by the puzzle creator to eliminate wrong choices. In panic, he yelled "That's not what yow means here!" and threw himself at David to push him away, landing on the bomb himself.</p>
                        <p>The explosion sent Vetea into a coma. Now David faces the remaining challenges alone, with only his fragmentary knowledge of Mwotlap directional systems to guide him.</p>
                    </div>
                    <div class="narration chinese-text" data-story-lang="zh" style="display: none;">
                        <p>在快樂島的搜尋過程中，大衛錯誤地在錯誤的石頭下挖掘，觸發了一個爆炸裝置。維提亞立即識別出倒數計時的嗶嗶聲，意識到這是謎題創作者設置的，用來淘汰錯誤選擇的人。在恐慌中，他大喊「yow在這裡不是那個意思！」並撲向大衛想要推開他，結果自己落在了炸彈上。</p>
                        <p>爆炸使維提亞陷入昏迷。現在大衛必須獨自面對剩下的挑戰，只能依靠他對莫特拉普語方向系統的片段知識來指引他。</p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="challenge-box" data-puzzle-lang="mwt">
                        <h3>Challenge 1: Qele ave "yow" aē?</h3>
                        <p>David m-et so teytey qele ave Vetea m-et me-helhleh "That's not what yow means here!" Nēk so teytey ave na-tqoy mwotlap "yow" aē qele liwo?</p>
                        <p><em>Hint: Van m̄ōl le-mdal na-tbēq directional system a Mwotlap. "Yow" so et matmat qiyig aē context ave?</em></p>
                    </div>
                    <div class="challenge-box" data-puzzle-lang="adv" style="display: none;">
                        <h3>Challenge 1: Figure out what Vetea means</h3>
                        <p>You must decode why Vetea shouted about "yow" meaning something different. Consider the difference between <strong>geocentric</strong> vs <strong>deictic</strong> usage of Mwotlap directionals in different spatial scales.</p>
                        <p><em>Advanced hint: The letter uses "yow" consistently, but Happy Island context requires understanding whether this refers to absolute geographic directions or relative positions from a specific viewpoint.</em></p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="narration" data-story-lang="en">
                        <p>Even knowing that this quest doesn't allow mistakes, David picks up the letter and maps, determined to solve the puzzle for the other huts. He must use the Mwotlap directional clues to determine the correct positions of huts A, B, and C relative to the chapel.</p>
                    </div>
                    <div class="narration chinese-text" data-story-lang="zh" style="display: none;">
                        <p>即使知道這個任務不允許犯錯，大衛還是拿起信件和地圖，決心要解決其他小屋的謎題。他必須使用莫特拉普語的方向線索來確定小屋A、B和C相對於教堂的正確位置。</p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="challenge-box" data-puzzle-lang="mwt">
                        <h3>Challenge 2: Sok n-ēm̄ su ABC</h3>
                        <p>Na-tbēq gēn aē:</p>
                        <div class="mwotlap-text">
                            <p>N-ēm̄ su A tog tô lok hag l-ēm̄ yon̄. N-ēm̄ yon tog tô lok hōw l-ēm̄ su A.<br>
                            N-ēm̄ su B tog tô lok yow l-ēm̄ yon̄. N-ēm̄ yon tog tô lok hay l-ēm̄ su B.<br>
                            N-ēm̄ su C tog tô lok hōw l-ēm̄ su B. N-ēm̄ su B tog tô lok hag l-ēm̄ su C.</p>
                        </div>
                        <p>Qele tateh nēk so van-dēmdēm na-tqoy "lok" gēn? Na-lēk spatial relation aē qele liwo?</p>
                    </div>
                    <div class="challenge-box" data-puzzle-lang="adv" style="display: none;">
                        <h3>Challenge 2: Map the Hut Constellation</h3>
                        <p>Using advanced Mwotlap spatial construction patterns with <strong>mediate reference</strong> (lok + directional), decode the relative positions:</p>
                        <div class="mwotlap-text">
                            <p>Hut A is 'hag'-ward of chapel; chapel is 'hōw'-ward of Hut A<br>
                            Hut B is 'yow'-ward of chapel; chapel is 'hay'-ward of Hut B<br>
                            Hut C is 'hōw'-ward of Hut B; Hut B is 'hag'-ward of Hut C</p>
                        </div>
                        <p><em>Advanced analysis required: Apply understanding of reciprocal spatial relationships and directional systems to create accurate positioning map.</em></p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="narration" data-story-lang="en">
                        <p>This time, David can't find any totem poles near the huts - the residents seem to have removed them. So he decides to ask the residents directly, using his painting skills to illustrate each hut and then asking which one had a totem pole in the correct location.</p>
                    </div>
                    <div class="narration chinese-text" data-story-lang="zh" style="display: none;">
                        <p>這一次，大衛在小屋附近找不到任何圖騰柱——居民們似乎已經移除了它們。所以他決定直接詢問居民，利用他的繪畫技巧來描繪每個小屋，然後詢問哪一個在正確位置有圖騰柱。</p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="comic-panel">
                        <div class="placeholder">
                            [Comic Panel 4: David showing his drawings to the Happy Island residents and asking about the totem poles - replace with your actual comic panel]
                        </div>
                    </div>
                </div>

                <div class="story-element">
                    <div class="challenge-box" data-puzzle-lang="mwt">
                        <h3>Challenge 3: Qele tateh David so ni-visa?</h3>
                        <p>David so teyhē so ni-visa ige: "Mey ave n-ēm̄ su, na-han̄ ēm̄ ne-vet aē yow l-ēm̄ ōk?"</p>
                        <p>Ba nēk m-et so mat qele ave na-tbēq spatial construction gēn aē no-qon? Qele tateh nēk so tēy na-visa mwotlap tateh aē?</p>
                        <p><em>Van lep: Na-lēk existential predicate wa interrogative construction patterns.</em></p>
                    </div>
                    <div class="challenge-box" data-puzzle-lang="adv" style="display: none;">
                        <h3>Challenge 3: Formulate the Critical Question</h3>
                        <p>David needs to ask: "Which hut has a rock/totem pole on its 'yow' side?"</p>
                        <p>Construct this question using proper Mwotlap syntax, considering:</p>
                        <ul style="text-align: left; margin: 15px 0;">
                            <li><strong>Interrogative formation</strong> with "mey ave" (which one)</li>
                            <li><strong>Existential/possessive construction</strong> patterns</li>
                            <li><strong>Spatial relation encoding</strong> with locative prefixes</li>
                            <li><strong>Mediate reference systems</strong> for relative positioning</li>
                        </ul>
                        <p><em>Advanced Challenge: Your answer should demonstrate mastery of Mwotlap morphosyntactic patterns beyond basic directional vocabulary.</em></p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="narration" data-story-lang="en">
                        <p>With the residents' help and his growing understanding of Mwotlap spatial systems, David finally solves the puzzle and finds the location of Stone E. The treasure hunt continues, but now he carries not just the weight of the remaining stones to find, but also the hope that Vetea will recover to see their quest completed.</p>
                        <p style="text-align: center; margin-top: 30px;">
                            <strong>The adventure continues, but the linguistic puzzles end here...</strong>
                        </p>
                    </div>
                    <div class="narration chinese-text" data-story-lang="zh" style="display: none;">
                        <p>在居民的幫助和他對莫特拉普語空間系統的不斷理解下，大衛終於解開了謎題，找到了寶石E的位置。尋寶之旅還在繼續，但現在他不僅承載著尋找剩餘寶石的重任，也承載著維提亞能夠康復並看到他們任務完成的希望。</p>
                        <p style="text-align: center; margin-top: 30px;">
                            <strong>冒險還在繼續，但語言學謎題到此結束...</strong>
                        </p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="challenge-box" style="background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%); border-color: #16a085;">
                        <h3 style="color: white;">🔓 Answer Keys & Solutions</h3>
                        <p style="text-align: center;">
                            <button onclick="showAnswers()" style="
                                background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
                                border: none;
                                color: white;
                                padding: 15px 30px;
                                font-size: 1.2em;
                                border-radius: 30px;
                                cursor: pointer;
                                box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
                                transition: all 0.3s ease;
                                font-weight: bold;
                            " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                                🗝️ Reveal Answer Keys
                            </button>
                        </p>
                        <div id="answer-section" style="display: none; margin-top: 25px; padding-top: 25px; border-top: 2px solid rgba(255, 255, 255, 0.3);">
                            <div data-puzzle-lang="mwt">
                                <h4 style="color: white; margin-bottom: 15px;">Na-tbēq ōk:</h4>
                                <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin: 10px 0;">
                                    <p><strong>Challenge 1:</strong> "Yow" aē directional geocentric (seawards) ba deictic context aē different. Vetea m-et so teytey ave David m-et so van-tamat "yow" aē absolute direction ba no local/relative position.</p>
                                </div>
                                <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin: 10px 0;">
                                    <p><strong>Challenge 2:</strong> Na-map spatial relations: Chapel tog center, Hut A tog hag (east), Hut B tog yow (seawards), Hut C tog between B wa chapel lok hōw.</p>
                                </div>
                                <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin: 10px 0;">
                                    <p><strong>Challenge 3:</strong> "Mey ave n-ēm̄ su, na-han̄ ēm̄ ne-vet aē yow l-ēm̄ ōk?" (Which hut has a stone/totem on its yow side?)</p>
                                </div>
                            </div>
                            <div data-puzzle-lang="adv" style="display: none;">
                                <h4 style="color: white; margin-bottom: 15px;">Analytical Solutions:</h4>
                                <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin: 10px 0;">
                                    <p><strong>Challenge 1:</strong> Geocentric vs. deictic directional interpretation. "Yow" functions as absolute geocentric reference (seawards) in letter context but requires deictic/relative interpretation at local scale on Happy Island.</p>
                                </div>
                                <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin: 10px 0;">
                                    <p><strong>Challenge 2:</strong> Mediate reference system analysis: lok + directional creates reciprocal spatial relationships. Solution requires mapping all constraints simultaneously to determine unique hut constellation.</p>
                                </div>
                                <div style="background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 10px; margin: 10px 0;">
                                    <p><strong>Challenge 3:</strong> Morphosyntactic construction: [mey ave] + [n-ēm̄ su] + [existential predicate] + [spatial locative]. Demonstrates mastery of interrogative + possessive + spatial systems.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let storyLanguage = 'en';
        let puzzleLanguage = 'mwt';

        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-trigger').forEach(trigger => {
                trigger.classList.remove('active');
            });
            
            document.getElementById(tabName + '-content').classList.add('active');
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            document.getElementById('sidebar').classList.add('expanded');
            document.querySelector('.content-area').classList.add('sidebar-open');
        }

        function closeSidebar() {
            document.getElementById('sidebar').classList.remove('expanded');
            document.querySelector('.content-area').classList.remove('sidebar-open');
        }

        function toggleStoryLanguage() {
            const checkbox = document.getElementById('storyLang');
            checkbox.checked = !checkbox.checked;
            
            const newLang = checkbox.checked ? 'zh' : 'en';
            console.log('Story toggle clicked! New language:', newLang);
            
            document.querySelectorAll(`[data-story-lang="${storyLanguage}"]`).forEach(el => {
                el.style.display = 'none';
            });
            
            document.querySelectorAll(`[data-story-lang="${newLang}"]`).forEach(el => {
                el.style.display = 'block';
            });
            
            storyLanguage = newLang;
            updateLanguageLabels('story', checkbox.checked);
        }

        function togglePuzzleLanguage() {
            const checkbox = document.getElementById('puzzleLang');
            checkbox.checked = !checkbox.checked;
            
            const newLang = checkbox.checked ? 'adv' : 'mwt';
            console.log('Puzzle toggle clicked! New language:', newLang);
            
            document.querySelectorAll(`[data-puzzle-lang="${puzzleLanguage}"]`).forEach(el => {
                el.style.display = 'none';
            });
            
            document.querySelectorAll(`[data-puzzle-lang="${newLang}"]`).forEach(el => {
                el.style.display = 'block';
            });
            
            puzzleLanguage = newLang;
            updateLanguageLabels('puzzle', checkbox.checked);
        }

        function updateLanguageLabels(type, isChecked) {
            const lang1 = document.getElementById(type + 'Lang1');
            const lang2 = document.getElementById(type + 'Lang2');
            
            if (isChecked) {
                lang1.style.opacity = '0.5';
                lang1.style.fontWeight = 'normal';
                lang2.style.opacity = '1';
                lang2.style.fontWeight = 'bold';
            } else {
                lang1.style.opacity = '1';
                lang1.style.fontWeight = 'bold';
                lang2.style.opacity = '0.5';
                lang2.style.fontWeight = 'normal';
            }
        }

        document.querySelectorAll('.tab-trigger').forEach(trigger => {
            trigger.addEventListener('click', function() {
                document.getElementById('sidebar').classList.add('expanded');
                document.querySelector('.content-area').classList.add('sidebar-open');
            });
        });

        document.addEventListener('DOMContentLoaded', function() {
            updateLanguageLabels('story', false);
            updateLanguageLabels('puzzle', false);
        });

        function showAnswers() {
            const answerSection = document.getElementById('answer-section');
            const button = event.target;
            
            if (answerSection.style.display === 'none') {
                answerSection.style.display = 'block';
                button.innerHTML = '🔒 Hide Answer Keys';
                button.style.background = 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)';
            } else {
                answerSection.style.display = 'none';
                button.innerHTML = '🗝️ Reveal Answer Keys';
                button.style.background = 'linear-gradient(135deg, #f39c12 0%, #e67e22 100%)';
            }
        }
    </script>
</body>
</html>narration" data-story-lang="en">
                        <p>It all began with a bottle washed ashore. David, a travel blogger drawn to the unexpected, found it half-buried in the sand on a remote Taiwanese beach months ago. Inside was a letter—weathered, sun-bleached, and written in a language he couldn't recognize.</p>
                        <p>He turned to Reddit for help. Weeks passed. Then months. Just when he was ready to give up, a message finally arrived from Vetea, a young man from Vanuatu who spoke Mwotlap—a language spoken by only around 2,000 people on the island of Motalava.</p>
                    </div>
                    <div class="narration chinese-text" data-story-lang="zh" style="display: none;">
                        <p>這一切都始於一個被沖上岸的瓶子。大衛是一名被意外所吸引的旅行部落客，幾個月前在台灣一個偏遠海灘上發現了這個半埋在沙中的瓶子。裡面有一封信——經受風雨侵蝕、被陽光漂白，用他無法辨認的語言寫成。</p>
                        <p>他向Reddit求助。幾週過去了，然後是幾個月。就在他準備放棄的時候，終於收到了一條訊息，來自瓦努阿圖的年輕人維提亞，他會說莫特拉普語——一種只有約2000人在莫塔拉瓦島上使用的語言。</p>
                    </div>
                </div>

                <div class="story-element">
                    <div class="
